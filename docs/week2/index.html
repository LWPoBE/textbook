<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>工学基礎実験実習 第9週目 講義資料</title>
	<link rel="stylesheet" href="../static/style.css">
</head>
<body>
<header>
	<h1>工学基礎実験実習 第9週目 講義資料</h1>
	<span class="subtitle">C言語のやさしい入門 2</span>
	<span class="course">岡山大学工学部 情報工学先進コース</span>
</header>
<div class="content">
	<section>
		<h2>はじめに</h2>
		<p>
			この講義では、C言語の入門として、基本的なプログラムを書いて実際に実行してみる、という実習を行います。
			C言語の詳細な説明については、1年生2・3学期や2年生の1・2学期の授業で行いますので、本講義では「書いて実行する」に焦点を当てて進めていきます。（※興味のある学生は教科書を読んで自学してみてください）
		</p>
		<h4>講義スケジュール</h4>
		<table class="schedule">
			<tr><th></th><th>日時</th><th>担当</th><th>内容</th></tr>
			<tr><td>第8週目</td><td>6/10（火）13:25〜</td><td>松田・遠藤</td><td><a href="../week1/">C言語のやさしい入門 1</a></td></tr>
			<tr><td>第9週目</td><td>6/17（火）13:25〜</td><td>松田・遠藤</td><td><a href="../week2/">C言語のやさしい入門 2</a></td></tr>
			<tr><td>第10週目</td><td>6/24（火）13:25〜</td><td>遠藤</td><td><a href="../week3/">C言語のやさしい入門 3</a></td></tr>
			<tr><td>第11週目</td><td>7/1（火）13:25〜</td><td>松田・遠藤</td><td><a href="../week4/">C言語のやさしい入門 4</a></td></tr>
			<tr><td>第12週目</td><td>7/8（火）13:25〜</td><td>松田・遠藤</td><td><a href="../week5/">C言語のやさしい入門 5</a></td></tr>
			<tr><td>第13週目</td><td>7/15（火）13:25〜</td><td>松田・遠藤</td><td><a href="../week6/">レポート文書作成技術（発展）</a></td></tr>
			<tr><td>第14週目</td><td>7/29（火）13:25〜</td><td>松田・遠藤</td><td>最終試問</td></tr>
		</table>
		<h4>教科書</h4>
		<ul>
			<li>共立出版 『プログラミング言語C: ANSI規格準拠』</li>
		</ul>
	</section>
	<section>
		<h2>準備</h2>
		<p>
			まずは、端末（ターミナル）を開き、今日の作業をするためのフォルダを作成・移動しましょう。
			前回作った<code>kiso-jikken</code>というフォルダの中に今日の日付のフォルダ（<code>20240617</code>）を作成します。
			そして、作成したフォルダに移動します。</p>
		<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cd kiso-jikken/
mkdir 20240617
cd 20240617
</script>
		</div>
	</section>
	<section>
		<h2>繰り返し処理（1.3節 For文）</h2>
		<section>
			<p>
				先の例では、繰り返し処理の方法として<code>while</code>文を使いました。
				ここではもう一つの方法として<code>for</code>文を見ていきます。
				<code>while</code>文では引数として繰り返しの条件のみを記載していましたが、
				<code>for</code>文では引数として3つの文が必要です（<code>;</code>で区切る）。
			</p>
			<p>それぞれの文は、それぞれ以下の役割があります。</p>
			<ul>
				<li>初期化文（最初に一度だけ実行される文）</li>
				<li>繰り返し条件文（繰り返す度に評価される文。条件を満たしたときのみ繰り返す）</li>
				<li>変化文（各繰り返しが終わるごとに実行される文。条件となる変数を変化させるところ）</li>
			</ul>
			<div class="code">
<span class="filename">w2-p1-fahr-for.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

int main() {
  int fahr;

  for(fahr = 0; fahr <= 300; fahr = fahr + 20) {
    printf("%3d\t%6.1f\n", fahr, (5.0 / 9.0) * (fahr - 32));
  }
}
</script>
			</div>
			<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cc w2-p1-fahr-for.c
./a.out
</script>
			</div>
		</section>
		<section class="kadai">
			<h3>演習</h3>
			<dl>
				<dt>演習1-5</dt>
				<dd>温度換算プログラムに手を加えて、表を逆順に（300度から0度へという順に）表示するように直しなさい。</dd>
			</dl>
		</section>
		<section class="advanced" id="ex1-5">
			<h3>演習1-5の解答</h3>
			<div class="adv-content">
				<div class="adv-more" onclick="document.getElementById('ex1-5').classList.toggle('shown');"></div>
				<div class="adv-body">
					<div class="code">
<span class="filename">ex1-5.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

int main() {
  int fahr;

  for (fahr = 300; 0 <= fahr; fahr = fahr - 20) {
    printf("%3d %6.1f\n", fahr, (5.0 / 9.0) * (fahr - 32));
  }
}
</script>
					</div>
					<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cc ex1-5.c
./a.out
</script>
					</div>
				</div>
			</div>
		</section>
	</section>
	<section>
		<h2>定数（1.4節 記号定数）</h2>
		<section>
			<div class="code">
<span class="filename">w2-p2-fahr-define.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

#define LOWER 0
#define UPPER 300
#define STEP  20

int main() {
  int fahr;

  for(fahr = LOWER; fahr <= UPPER; fahr = fahr + STEP) {
    printf("%3d\t%6.1f\n", fahr, (5.0 / 9.0) * (fahr - 32));
  }
}
</script>
			</div>
			<aside>
				一般に定数は、他の変数と区別するために「全て大文字」で書くことが多いです。<br>
				<code>#define</code>の行は、<code>#include</code>と同じく行末にセミコロン（<code>;</code>）が入らないので注意。
			</aside>
		</section>
	</section>
	<section>
		<h2>文字入出力（1.5節 文字入出力）</h2>
		<p>文字入出力プログラムを書いていきます。</p>
		<section>
			<h3>ファイルを読み込む（1.5.1項 ファイルの複写）</h3>
			<p>
				テキストファイルを読み込むプログラムを書いてみましょう。
			</p>
			<div class="code">
<span class="filename">w2-p3-getchar.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

int main() {
  int c;

  c = getchar();
  while(c != EOF) {
  	putchar(c);
  	c = getchar();
  }
}
</script>
			</div>
			<aside>
				<code>getchar()</code>は、与えた文字列を前から順番に一文字ずつ取得する関数です。
			</aside>
			<aside>
				<code>EOF</code>は、End of File の略で、ファイルの終端を示す文字です。
			</aside>
			<p>
				ファイルを読み込んでみましょう。<br>
				読み込むサンプルファイル（<code><a href="data.txt">data.txt</a></code>）をダウンロードして、プログラムと同じフォルダに置きます。<br>
				そして、<code>cc</code>または<code>gcc</code>コマンドでプログラムをコンパイルし、実行します。
			</p>
			<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cc w2-p3-getchar.c
./a.out < data.txt
</script>
			</div>
			<p>
				上記のプログラムでは、<code>c = getchar();</code>という同じコードが2回登場します。
				できればシンプルにしたいですね。そこで、<code>while</code>の引数にこのコードを埋め込んでみましょう。
			</p>
			<div class="code">
<span class="filename">w2-p4-getchar-short.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

int main() {
  int c;

  while((c = getchar()) != EOF) {
  	putchar(c);
  }
}
</script>
			</div>
			<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cc w2-p4-getchar-short.c
./a.out < data.txt
</script>
			</div>
			<p>
				<code>while</code>の引数<code>((c = getchar()) != EOF)</code>は、まず<code>(c = getchar())</code>の文が実行されます。この文の実行結果は<code>getchar()</code>の値になります。そして、その後<code>(getchar() != EOF)</code>が実行されます。
			</p>
		</section>
		<section class="kadai">
			<h3>演習</h3>
			<dl>
				<dt>演習1-6</dt>
				<dd><code>getchar() != EOF</code>という式の値が<code>0</code>か<code>1</code>であることを確認せよ。</dd>
				<dt>演習1-7</dt>
				<dd><code>EOF</code>を印字するプログラムを書け。</dd>
			</dl>
		</section>
		<section class="advanced" id="ex1-6">
			<h3>演習1-6の解答</h3>
			<div class="adv-content">
				<div class="adv-more" onclick="document.getElementById('ex1-6').classList.toggle('shown');"></div>
				<div class="adv-body">
					<div class="code">
<span class="filename">ex1-6.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

int main() {
  int c;

  while((c = getchar()) != EOF) {
    putchar(c);
    printf("\t(c = getchar()) != EOF ... %d\n", c != EOF);
  }
  printf("\t(c = getchar()) != EOF ... %d\n", c != EOF);
}
</script>
					</div>
					<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cc ex1-6.c
./a.out < data.txt
</script>
					</div>
				</div>
			</div>
		</section>
		<section class="advanced" id="ex1-7">
			<h3>演習1-7の解答</h3>
			<div class="adv-content">
				<div class="adv-more" onclick="document.getElementById('ex1-7').classList.toggle('shown');"></div>
				<div class="adv-body">
					<div class="code">
<span class="filename">ex1-7.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

int main() {
  printf("EOF = %d\n", EOF);
}
</script>
					</div>
					<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cc ex1-7.c
./a.out
</script>
					</div>
				</div>
			</div>
		</section>
		<section>
			<h3>文字数カウント（1.5.2項 文字のカウント）</h3>
			<p>
				ファイルが読み込めるようになったので、次はファイルの中にある文字数のカウントをしてみましょう。
			</p>
			<div class="code">
<span class="filename">w2-p5-countchar.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

int main() {
  long nc;

  nc = 0;
  while(getchar() != EOF) {
  	nc++;
  }
  printf("%ld\n", nc);
}
</script>
			</div>
			<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cc w2-p5-countchar.c
./a.out < data.txt
</script>
			</div>
			<p>
				<code>nc++;</code>は、<code>nc = nc + 1;</code>と同じ意味で、変数に1を足す処理を表します。
				逆に<code>nc--;</code>とすると、変数から1を引く処理（<code>nc = nc - 1;</code>）が実行されます。
			</p>
			<aside>
				<code>long</code>型は<code>long int</code>の略で、<code>int</code>型よりも大きい数を取り扱えます。
			</aside>
			<p>上記のコードを<code>for</code>文を使って書き換えてみましょう。</p>
			<div class="code">
<span class="filename">w2-p6-countchar-for.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

int main() {
  double nc; 
 
  for(nc = 0; getchar() != EOF; nc++) { }
  printf("%.0f\n", nc);
}
</script>
			</div>
			<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cc w2-p6-countchar-for.c
./a.out < data.txt
</script>
			</div>
			<p>
				<code>for</code>文の「変化文（3つめの文）」のところで<code>nc++</code>が実行されており、<code>for</code>文の中身で行うべき作業は特にないため、空になっています。
			</p>
		</section>
		<section>
			<h3>行数カウント（1.5.3項 行数のカウント）</h3>
			<p>
				次はファイルの行数をカウントしてみましょう。
			</p>
			<div class="code">
<span class="filename">w2-p7-countrow.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

int main() {
  int c, nl;

  nl = 0;
  while((c = getchar()) != EOF) {
  	if(c == '\n') {
	   	nl++;
  	}
  }
  printf("%d\n", nl);
}
</script>
			</div>
			<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cc w2-p7-countrow.c
./a.out < data.txt
</script>
			</div>
		</section>
		<section class="kadai">
			<h3>演習</h3>
			<p>この演習では、別のテキストファイル（<code><a href="data-ex.txt">data-ex.txt</a></code>）を使うこと。</p>
			<dl>
				<dt>演習1-8</dt>
				<dd>空白、タブ、改行を数えるプログラムを書け。</dd>
				<dt>演習1-9</dt>
				<dd>二つ以上の空白を一つの空白に置き換えながら、入力を出力に複写するプログラムを書け。</dd>
				<dt>演習1-10</dt>
				<dd>各タブを<code>\t</code>に、各改行を<code>\n</code>に、各バックスラッシュを<code>\\</code>に置き換えながら、入力を出力に複写するプログラムを書け。（Windowsの場合は<code>\n</code>のところでエラーが起きるかも知れないのでその場合は、改行を置き換えるコードは省略してください）</dd>
			</dl>
		</section>
		<section class="advanced" id="ex1-8">
			<h3>演習1-8の解答</h3>
			<div class="adv-content">
				<div class="adv-more" onclick="document.getElementById('ex1-8').classList.toggle('shown');"></div>
				<div class="adv-body">
					<div class="code">
<span class="filename">ex1-8.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

int main() {
  int c, ns, nt, nnl;

  ns = nt = nnl = 0;
  while((c = getchar()) != EOF) {
    if(c == ' '){
      ns++;
    } else if(c == '\t'){
      nt++;
    } else if(c == '\n'){
      nnl++;
    }
  }
  printf("space: %d, tab: %d, line-break: %d\n", ns, nt, nnl);
}
</script>
					</div>
					<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cc ex1-8.c
./a.out < data-ex.txt
</script>
					</div>
				</div>
			</div>
		</section>
		<section class="advanced" id="ex1-9">
			<h3>演習1-9の解答</h3>
			<div class="adv-content">
				<div class="adv-more" onclick="document.getElementById('ex1-9').classList.toggle('shown');"></div>
				<div class="adv-body">
					<div class="code">
<span class="filename">ex1-9.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

int main(){
  int c;
  while((c = getchar()) != EOF){
    if(c == ' '){
      while(c == ' '){
        c = getchar();
      }
      putchar(' ');
    }
    putchar(c);
  }
}
</script>
					</div>
					<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cc ex1-9.c
./a.out < data-ex.txt
</script>
					</div>
				</div>
			</div>
		</section>
		<section class="advanced" id="ex1-10">
			<h3>演習1-10の解答</h3>
			<div class="adv-content">
				<div class="adv-more" onclick="document.getElementById('ex1-10').classList.toggle('shown');"></div>
				<div class="adv-body">
					<div class="code">
<span class="filename">ex1-10.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

int main() {
  int c;
  while((c = getchar()) != EOF){
    if(c == '\t'){
      printf("\\t");
    } else if(c == '\n'){
      printf("\\n");
    } else if(c == '\\'){
      printf("\\\\");
    } else{
      putchar(c);
    }
  }
}
</script>
					</div>
					<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cc ex1-10.c
./a.out < data-ex.txt
</script>
					</div>
				</div>
			</div>
		</section>
		<section>
			<h3>単語数カウント（1.5.4項 単語のカウント）</h3>
			<p>
				次はファイルに含まれる単語の数をカウントしてみましょう。
			</p>
			<div class="code">
<span class="filename">w2-p8-countword.c</span>
<script type="text/plain" class="language-c line-numbers"
>#include <stdio.h>

#define IN  1
#define OUT 0

int main() {
  int c, nl, nw, nc, state;

  state = OUT;
  nl = nw = nc = 0;
  while((c = getchar()) != EOF) {
  	nc++;
  	if(c == '\n') { nl++; }
  	if(c == ' ' || c == '\n' || c == '\t') {
  		state = OUT;
  	} else if(state == OUT) {
  		state = IN;
  		nw++;
  	}
  }
  printf("char: %d, line: %d, word: %d\n", nc, nl, nw);
}
</script>
			</div>
			<div class="code">
<span class="filename">端末（ターミナル）</span>
<script type="text/plain" class="language-shell"
>cc w2-p8-countword.c
./a.out < data.txt
</script>
			</div>
		</section>
	</section>
	</section>
</div>
<footer>
	更新： 2025年5月20日
</footer>
</body>
<!-- vue.js -->
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
<script src="../static/auth2.js"></script>
<!-- Prism.js -->
<link href="https://unpkg.com/prismjs@1.29.0/themes/prism.min.css" rel="stylesheet" />
<script src="https://unpkg.com/prismjs@1.29.0/components/prism-core.min.js"></script>
<script src="https://unpkg.com/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
<!-- Line Number -->
<script src="https://unpkg.com/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<link href="https://unpkg.com/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
<!-- Line HighLight -->
<script src="https://unpkg.com/prismjs@1.29.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
<link href="https://unpkg.com/prismjs@1.29.0/plugins/line-highlight/prism-line-highlight.min.css" rel="stylesheet" />
<!-- Unescaped Markup -->
<script src="https://unpkg.com/prismjs@1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.js"></script>
<link href="https://unpkg.com/prismjs@1.29.0/plugins/unescaped-markup/prism-unescaped-markup.min.css" rel="stylesheet" />
</html>
